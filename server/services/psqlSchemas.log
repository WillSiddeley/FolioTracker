
CREATE SCHEMA info;

CREATE TABLE info.tickers (
    id SERIAL UNIQUE,
    symbol VARCHAR(5),
    name VARCHAR(255)
);

CREATE TABLE info.investment_type (
    id SERIAL UNIQUE,
    type VARCHAR(255),
    name VARCHAR(255)
);

CREATE SCHEMA users;

CREATE TABLE users.users (
    id SERIAL UNIQUE,
    name VARCHAR(255)
);

CREATE SCHEMA invest;

CREATE TABLE invest.portfolio (
    id SERIAL UNIQUE,
    name VARCHAR(255),
    user_ref INTEGER, CONSTRAINT user_ref_fk FOREIGN KEY(user_ref) REFERENCES users.users(id)
);

CREATE TABLE invest.investment (
    id SERIAL UNIQUE,
    portfolio_ref INTEGER, CONSTRAINT portfolio_ref_fk FOREIGN KEY(portfolio_ref) REFERENCES invest.portfolio(id),
    ticker_ref INTEGER, CONSTRAINT ticker_ref_fk FOREIGN KEY(ticker_ref) REFERENCES info.tickers(id),
    investment_type_ref INTEGER, CONSTRAINT investment_type_ref_fk FOREIGN KEY(investment_type_ref) REFERENCES info.investment_type(id),
    quantity FLOAT
);

CREATE TABLE invest.lot (
    id SERIAL UNIQUE,
    investment_ref INTEGER, CONSTRAINT investment_ref_fk FOREIGN KEY(investment_ref) REFERENCES invest.investment(id),
    quantity FLOAT,
    price_paid MONEY
);